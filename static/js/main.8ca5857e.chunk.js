(this.webpackJsonpproyecto_final=this.webpackJsonpproyecto_final||[]).push([[0],[,,,,,,function(e,t,n){e.exports={favs:"Admin_favs__3S5mV",search:"Admin_search__3fepQ",ptn2:"Admin_ptn2__2AecN",divider:"Admin_divider__1xz2V",wrapper:"Admin_wrapper__-oNSK",btn2:"Admin_btn2__2sfRZ"}},function(e,t,n){e.exports={"Instasivar-card":"Card_Instasivar-card__3cxCN","Instasivar-card-header":"Card_Instasivar-card-header__2YW1q",front:"Card_front__3RrUG",heart1:"Card_heart1__1rn5T",title1:"Card_title1__3HZF0",imgclas:"Card_imgclas__QZ0NF","Instasivar-card-content":"Card_Instasivar-card-content__1uQBt",inpubx1:"Card_inpubx1__1yWeP",description:"Card_description__n56oe",cmmts:"Card_cmmts__2iXa9",heart:"Card_heart__emSsu",btn4:"Card_btn4__3ezhu",divider:"Card_divider__1DO2B",divider2:"Card_divider2__2oZDF",hr1:"Card_hr1__Weaas",user1:"Card_user1__1dSMf"}},,,function(e,t,n){e.exports={log:"Login_log__3e3GO",log1:"Login_log1__1k5ZW",box:"Login_box__1-KUp",user:"Login_user__o_5kn",pass:"Login_pass__1CbbB",btn1:"Login_btn1__2t_yT","social-links":"Login_social-links__3r08v"}},function(e,t,n){e.exports={baradd:"DivUpdate_baradd__15IP8",ptn1:"DivUpdate_ptn1__TmcKp",btn1:"DivUpdate_btn1__3OeBo"}},function(e,t,n){e.exports={wrapper:"Post_wrapper__31pLj",logo:"Post_logo__3jM2u",navig:"Post_navig__3qxuq",forms:"Post_forms__3AXzE"}},function(e,t,n){e.exports={baradd:"ToPost_baradd__TFh03",ptn1:"ToPost_ptn1__dKb-C",btn1:"ToPost_btn1__3Z6DK"}},,,,function(e,t,n){e.exports={help:"ShowAll_help__2BXia"}},,,,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(16),s=n.n(c),o=(n(23),n(9)),i=n(5),u=n(2),l=n.n(u),p=n(4),d=n(3),j=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/auth/signin"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:t,password:n})});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=j,h=n(18),f=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/auth/whoami"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=f,O=n(0),m=r.a.createContext(),x="token",g=function(e){var t=Object(a.useState)(void 0),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(void 0),o=Object(d.a)(s,2),i=o[0],u=o[1];Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem(x))){e.next=8;break}return e.next=4,v(t);case 4:n=e.sent,a=n.username,r=n.role,a&&r&&(u({username:a,role:r}),j(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]);var j=function(e){localStorage.setItem(x,e),c(e)},f=Object(a.useCallback)((function(e,t){var n=function(){var n=Object(p.a)(l.a.mark((function n(){var a,r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=!1,n.prev=1,n.next=4,b(e,t);case 4:r=n.sent,(c=r.token)&&(j(c),a=!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),console.log("No se pudo iniciar sesi\xf3n");case 13:return n.prev=13,n.abrupt("return",a);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}();return n()}),[]),g=Object(a.useCallback)((function(){u(void 0),j(void 0)}),[]),_=Object(a.useMemo)((function(){return{token:r,user:i,login:f,logout:g}}),[r,i,f,g]);return Object(O.jsx)(m.Provider,Object(h.a)({value:_},e))},_=function(){var e=r.a.useContext(m);if(!e)throw new Error("Ha ocurrido un error");return e},k=n(10),w=n.n(k),S=function(){var e=Object(i.g)(),t=_(),n=t.login,r=t.token,c=Object(a.useState)(""),s=Object(d.a)(c,2),o=s[0],u=s[1],j=Object(a.useState)(""),b=Object(d.a)(j,2),h=b[0],f=b[1],v=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n(o,h);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(r){e("/redirect");var t=localStorage.getItem("PublicationType");"owned"===t||"all"===t||(localStorage.setItem("PublicationType","all"),window.location.reload(!0))}}),[r,e]),Object(O.jsx)("div",{className:w.a.log,children:Object(O.jsx)("main",{className:w.a.box,children:Object(O.jsxs)("form",{onSubmit:v,children:[Object(O.jsx)("h2",{className:w.a.log1,children:"Login"}),Object(O.jsx)("div",{class:"userdiv",children:Object(O.jsx)("input",{className:w.a.user,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"\ud83d\udc64 Type your username"})}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{className:w.a.pass,onChange:function(e){return f(e.target.value)},type:"password",placeholder:"\ud83d\udc68\ud83c\udffb\u200d\ud83e\uddaf Type your password"}),Object(O.jsx)("br",{}),Object(O.jsx)("h4",{children:"Forgot password?"}),Object(O.jsx)("button",{className:w.a.btn1,children:"LogIn"}),Object(O.jsx)("br",{}),Object(O.jsx)("h4",{children:"Or sign up using"}),Object(O.jsxs)("div",{className:w.a["social-links"],children:[Object(O.jsx)("a",{target:"blank",href:"",children:Object(O.jsx)("img",{class:"Social_media",src:"https://www.svgrepo.com/show/349359/facebook.svg",alt:"facebook"})}),Object(O.jsx)("a",{target:"blank",href:"",children:Object(O.jsx)("img",{class:"Social_media",src:"https://www.svgrepo.com/show/349410/instagram.svg",alt:"instagram"})}),Object(O.jsxs)("a",{target:"blank",href:"",children:[Object(O.jsx)("img",{class:"Social_media",src:"https://www.svgrepo.com/show/349530/tiktok.svg",alt:"tiktok"})," "]})]})]})})})},N=n(12),y=n.n(N),C=function(e){var t=e.OnOwnedPost,n=void 0===t?function(){}:t,a=_(),r=Object(i.g)();function c(e){localStorage.setItem("PublicationType","".concat(e)),window.location.reload(!0),n()}return Object(O.jsx)("div",{className:y.a.Bodyall,children:Object(O.jsx)("div",{className:y.a.body,children:Object(O.jsx)("header",{children:Object(O.jsxs)("div",{className:y.a.wrapper,children:[Object(O.jsx)("div",{className:y.a.logo,children:"InstaSivar"}),Object(O.jsxs)("nav",{className:y.a.navig,children:[Object(O.jsx)("a",{onClick:function(){c("all")},href:"#",children:"Home"}),Object(O.jsx)("a",{onClick:function(){c("owned")},href:"#",children:"My profile"}),Object(O.jsx)("a",{onClick:function(e){e.preventDefault(),a.logout(),r("/login")},href:"#",children:"Log out"})]})]})})})})},I=localStorage.getItem("token"),P=localStorage.getItem("PublicationType"),T=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e?{_id:e._id,title:e.title,description:e.description,image:e.image,comments:e.comments.map((function(e){return e})),user:e.user.username,likes:e.likes.length}:null},e.prev=1,e.next=4,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/").concat(P,"?limit=").concat(t,"&page=").concat(n),{headers:{Authorization:"Bearer ".concat(I)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.data.map((function(e){return a(e)})),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),A=T,F=n(7),B=n.n(F),z=function(){var e=Object(p.a)(l.a.mark((function e(t,n,a){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/comment/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({description:"".concat(a)})});case 2:if(!(r=e.sent).ok){e.next=8;break}return e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),D=z,G=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/toggle/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:if(!(a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=G,U=function(e){var t,n=e.post,r=e.GetId,c=void 0===r?function(){}:r,s=e.SetFavorite,o=void 0===s?function(){}:s,u=e.OnComment,l=void 0===u?function(){}:u,p=Object(a.useState)(""),j=Object(d.a)(p,2),b=j[0],h=j[1],f=null!==(t=n.image)&&void 0!==t?t:"https://www.softzone.es/app/uploads/2018/04/guest.png?x=480&quality=20",v=_().token;Object(i.g)();return Object(O.jsx)("div",{className:B.a.front,children:Object(O.jsxs)("div",{className:B.a["Instasivar-card"],children:[Object(O.jsxs)("div",{className:B.a["Instasivar-card-header"],children:[Object(O.jsx)("div",{class:"user",children:n.user}),Object(O.jsx)("div",{className:B.a.title1,children:n.title}),Object(O.jsx)("div",{className:B.a.heart1,onClick:function(){o()},children:"\u2b50"})]}),Object(O.jsx)("div",{className:B.a.divider2}),Object(O.jsx)("button",{className:B.a.btn4,onClick:function(e){e.preventDefault();L(v,n._id)},children:"Ocultar"}),Object(O.jsx)("div",{children:Object(O.jsx)("img",{className:B.a.imgclas,src:f,alt:""})}),Object(O.jsxs)("div",{className:B.a["Instasivar-card-content"],children:[Object(O.jsxs)("p",{className:B.a.description,children:[Object(O.jsx)("span",{className:B.a.heart,onClick:function(){c()},children:"\ud83d\udc93"})," ",n.likes," Me gusta"]}),Object(O.jsx)("a",{children:Object(O.jsx)("div",{className:B.a.description,children:n.description})}),Object(O.jsx)("a",{className:B.a.cmmts,href:"#",children:"Comments"}),Object(O.jsx)("div",{children:n.comments.map((function(e,t){return Object(O.jsx)("ul",{children:Object(O.jsxs)("li",{children:[Object(O.jsx)("div",{className:B.a.user1,children:e.user.username})," ",Object(O.jsxs)("div",{className:B.a.descr1,children:[": ",e.description]})]},Math.random())},Math.random())}))}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{className:B.a.hr1}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(b);D(v,n._id,b);l(),h("")},children:[Object(O.jsx)("input",{className:B.a.inpubx1,value:b,onChange:function(e){return h(e.target.value)},type:"text",placeholder:"Add a comment"}),Object(O.jsx)("div",{className:B.a.divider}),Object(O.jsx)("button",{className:B.a.btn4,children:"Post \ud83d\udcac"})]})]})]})})},E=n(17),H=n.n(E),M=function(e){var t=e.posts,n=void 0===t?[]:t,a=e.GetId,r=void 0===a?function(){}:a,c=e.SetFavorite,s=void 0===c?function(){}:c,o=e.OnComment,i=void 0===o?function(){}:o;return Object(O.jsx)("div",{className:H.a.help,children:n.map((function(e){return Object(O.jsx)(U,{post:e,GetId:function(){r(e._id)},SetFavorite:function(){s(e._id)},OnComment:i},e._id)}))})},J=function(){var e=Object(p.a)(l.a.mark((function e(t,n,a,r){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({title:"".concat(n),description:"".concat(a),image:"".concat(r)})});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Z=J,q=n(13),K=n.n(q),R=function(e){var t=e.OnPost,n=void 0===t?function(){}:t,r=Object(a.useState)(""),c=Object(d.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(""),u=Object(d.a)(i,2),j=u[0],b=u[1],h=Object(a.useState)(""),f=Object(d.a)(h,2),v=f[0],m=f[1],x=_().token,g=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:K.a.baradd,children:Object(O.jsxs)("form",{onSubmit:g,children:[Object(O.jsx)("input",{className:K.a.ptn1,onChange:function(e){return o(e.target.value)},id:"titleText",type:"text",placeholder:"Title of post"}),Object(O.jsx)("input",{className:K.a.ptn1,onChange:function(e){return b(e.target.value)},id:"descriptionText",type:"text",placeholder:"Add feelings"}),Object(O.jsx)("input",{className:K.a.ptn1,onChange:function(e){return m(e.target.value)},id:"imageText",type:"text",placeholder:"URL of img"}),Object(O.jsx)("button",{className:K.a.btn1,onClick:function(){Z(x,s,j,v),console.log("Usted a realizado una nueva publicaci\xf3n"),n()},children:"Publish"})]})})},W=localStorage.getItem("token"),Q=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return e?{_id:e._id,title:e.title,description:e.description,image:e.image,comments:e.comments.map((function(e){return e})),user:e.user.username,likes:e.likes.length}:null},e.prev=1,e.next=4,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/one/").concat(t),{headers:{Authorization:"Bearer ".concat(W)}});case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,c=n(r),e.abrupt("return",c);case 12:return e.prev=12,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),X=Q,V=localStorage.getItem("token"),Y=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/fav"),{headers:{Authorization:"Bearer ".concat(V)}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=n.favorites.map((function(e){return X(e)})),e.next=9,Promise.all(a);case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=Y,ee=function(e){var t=e.favorites,n=void 0===t?[]:t,a=e.GetId,r=void 0===a?function(){}:a,c=e.SetFavorite,s=void 0===c?function(){}:c,o=e.OnComment,i=void 0===o?function(){}:o;return Object(O.jsx)("div",{children:n.map((function(e){if(void 0!==e._id)return Object(O.jsx)(U,{post:e,GetId:function(){r(e._id)},SetFavorite:function(){s(e._id)},OnComment:i},e._id)}))})},te=function(e){var t=e.post,n=void 0===t?[]:t,a=e.GetId,r=void 0===a?function(){}:a,c=e.SetFavorite,s=void 0===c?function(){}:c;return n?"undefined"!==typeof n?Object(O.jsx)("div",{children:Object(O.jsx)(U,{post:n,GetId:function(){r(n._id)},SetFavorite:function(){s(n._id)}},n._id)}):void 0:Object(O.jsx)("div",{})},ne=n(6),ae=n.n(ne),re=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),s=Object(d.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)([]),j=Object(d.a)(u,2),b=j[0],h=j[1],f=Object(a.useState)(null),v=Object(d.a)(f,2),m=v[0],x=v[1],g=Object(a.useState)(null),_=Object(d.a)(g,2),k=_[0],w=_[1],S=Object(a.useState)(null),N=Object(d.a)(S,2),y=N[0],I=N[1],P=Object(a.useState)(null),T=Object(d.a)(P,2),F=T[0],B=T[1],z=Object(a.useState)(!1),D=Object(d.a)(z,2),G=D[0],L=D[1],U=Object(a.useState)(!1),E=Object(d.a)(U,2),H=E[0];E[1];Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(10,o);case 3:t=e.sent,r(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[o,y,G,H]),Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$();case 3:t=e.sent,h(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[F,y,G]);var J=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(m),e.next=4,X(m);case 4:void 0===(n=e.sent)?(console.log(n),w("")):(console.log(n),w(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){L(!G)},q=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=localStorage.getItem("token"),e.next=4,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/like/".concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});case 4:a=e.sent,console.log(a),I(a),console.log(y);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=localStorage.getItem("token"),e.next=4,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav/".concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});case 4:a=e.sent,B(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:ae.a.favs,children:[Object(O.jsx)(C,{}),Object(O.jsx)(M,{posts:n,GetId:q,SetFavorite:K,OnComment:Z}),Object(O.jsxs)("div",{className:ae.a.wrapper,children:[Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("button",{className:ae.a.btn2,onClick:function(){0!=o&&i(o-1)},type:"click",children:"Previous Page"}),Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("button",{className:ae.a.btn2,onClick:function(){i(o+1)},type:"click",children:"Next Page"}),Object(O.jsx)("div",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:" Favorites"}),Object(O.jsx)(ee,{favorites:b,GetId:q,SetFavorite:K,OnComment:Z})]}),Object(O.jsxs)("div",{className:ae.a.search,children:[Object(O.jsx)("h2",{children:"Search specific post"}),Object(O.jsxs)("form",{onSubmit:J,children:[Object(O.jsx)("label",{htmlFor:"Buscar_post",children:"Insert Id:"}),Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("input",{className:ae.a.ptn2,type:"text",name:"Buscar_post",onChange:function(e){return x(e.target.value)}}),Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("button",{className:ae.a.btn2,children:"Search"})]}),Object(O.jsx)(te,{post:k,GetId:q,SetFavorite:K,OnComment:Z})]})]})},ce=function(e){var t=e.role,n=e.children,a=_(),r=a.token,c=a.user;return r?c&&c.role===t?n:Object(O.jsx)(i.a,{replace:!0,to:"/404"}):Object(O.jsx)(i.a,{replace:!0,to:"/login"})},se=n(11),oe=n.n(se),ie=function(){var e=Object(p.a)(l.a.mark((function e(t,n,a,r,c){var s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/update/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({title:"".concat(a),description:"".concat(r),image:"".concat(c)})});case 2:if(!(s=e.sent).ok){e.next=8;break}return e.next=6,s.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),ue=ie,le=function(e){var t=e.OnPost,n=void 0===t?function(){}:t,r=Object(a.useState)(""),c=Object(d.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(""),u=Object(d.a)(i,2),j=u[0],b=u[1],h=Object(a.useState)(""),f=Object(d.a)(h,2),v=f[0],m=f[1],x=Object(a.useState)(""),g=Object(d.a)(x,2),k=g[0],w=g[1],S=_().token,N=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:oe.a.baradd,children:Object(O.jsxs)("form",{onSubmit:N,children:["Update:",Object(O.jsx)("input",{className:oe.a.ptn1,onChange:function(e){return o(e.target.value)},id:"titleText",type:"text",placeholder:"Title of post"}),Object(O.jsx)("input",{className:oe.a.ptn1,onChange:function(e){return b(e.target.value)},id:"descriptionText",type:"text",placeholder:"Add feelings"}),Object(O.jsx)("input",{className:oe.a.ptn1,onChange:function(e){return m(e.target.value)},id:"imageText",type:"text",placeholder:"URL of img"}),Object(O.jsx)("input",{className:oe.a.ptn1,onChange:function(e){return w(e.target.value)},id:"postIdText",type:"text",placeholder:"Id del post"}),Object(O.jsx)("button",{className:oe.a.btn1,onClick:function(){ue(S,k,s,j,v),console.log("Usted a realizado una nueva publicaci\xf3n"),n()},children:"Publish"})]})})},pe=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),s=Object(d.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)([]),j=Object(d.a)(u,2),b=j[0],h=j[1],f=Object(a.useState)(null),v=Object(d.a)(f,2),m=v[0],x=v[1],g=Object(a.useState)(null),_=Object(d.a)(g,2),k=_[0],w=_[1],S=Object(a.useState)(null),N=Object(d.a)(S,2),y=N[0],I=N[1],P=Object(a.useState)(null),T=Object(d.a)(P,2),F=T[0],B=T[1],z=Object(a.useState)(!1),D=Object(d.a)(z,2),G=D[0],L=D[1],U=Object(a.useState)(!1),E=Object(d.a)(U,2),H=E[0],J=E[1];Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(10,o);case 3:t=e.sent,r(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[o,y,G,H]),Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$();case 3:t=e.sent,h(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[F,y,G]);var Z=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(m),e.next=4,X(m);case 4:void 0===(n=e.sent)?(console.log(n),w("")):(console.log(n),w(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){J(!H)},K=function(){L(!G)},W=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=localStorage.getItem("token"),e.next=4,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/like/".concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});case 4:a=e.sent,console.log(a),I(a),console.log(y);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=localStorage.getItem("token"),e.next=4,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav/".concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});case 4:a=e.sent,B(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:ae.a.favs,children:[Object(O.jsx)(C,{OnOwnedPost:q}),Object(O.jsx)(R,{OnPost:q}),Object(O.jsx)(le,{OnPost:q}),Object(O.jsx)(M,{posts:n,GetId:W,SetFavorite:Q,OnComment:K}),Object(O.jsxs)("div",{className:ae.a.wrapper,children:[Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("button",{className:ae.a.btn2,onClick:function(){0!=o&&i(o-1)},type:"click",children:"Previous Page"}),Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("button",{className:ae.a.btn2,onClick:function(){i(o+1)},type:"click",children:"Next Page"}),Object(O.jsx)("div",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:" Favorites"}),Object(O.jsx)(ee,{favorites:b,GetId:W,SetFavorite:Q,OnComment:K})]}),Object(O.jsxs)("div",{className:ae.a.search,children:[Object(O.jsx)("h2",{children:"Search specific post"}),Object(O.jsxs)("form",{onSubmit:Z,children:[Object(O.jsx)("label",{htmlFor:"Buscar_post",children:"Insert Id:"}),Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("input",{className:ae.a.ptn2,type:"text",name:"Buscar_post",onChange:function(e){return x(e.target.value)}}),Object(O.jsx)("div",{className:ae.a.divider}),Object(O.jsx)("button",{className:ae.a.btn2,children:"Search"})]}),Object(O.jsx)(te,{post:k,GetId:W,SetFavorite:Q,OnComment:K})]})]})},de={admin:"/admin",user:"/user"},je=function(){var e,t=_().user;return t?Object(O.jsx)(i.a,{replace:!0,to:null!==(e=de[t.role])&&void 0!==e?e:"/"}):Object(O.jsx)("p",{children:"No se puede redireccionar"})};var be=function(){return Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.d,{children:[Object(O.jsx)(i.b,{path:"/",element:Object(O.jsx)(i.a,{replace:!0,to:"/login"})}),Object(O.jsx)(i.b,{path:"/login",element:Object(O.jsx)(S,{})}),Object(O.jsx)(i.b,{path:"/redirect",element:Object(O.jsx)(je,{})}),Object(O.jsx)(i.b,{path:"/user",element:Object(O.jsx)(ce,{role:"user",children:Object(O.jsx)(re,{})})}),Object(O.jsx)(i.b,{path:"/admin",element:Object(O.jsx)(ce,{role:"admin",children:Object(O.jsx)(pe,{})})}),Object(O.jsx)(i.b,{path:"/*",element:Object(O.jsx)("div",{children:Object(O.jsx)("main",{children:Object(O.jsxs)("form",{children:[Object(O.jsx)("h1",{children:"404"})," ",Object(O.jsx)("h3",{children:"Sorry, the page not found"}),Object(O.jsx)("p",{children:" The page you requested could not be found "}),Object(O.jsx)("img",{src:"https://www.wallpaperup.com/uploads/wallpapers/2014/09/25/455955/45cc249825d1d76d509d0aa81a67adb5.jpg",alt:"error",width:"500",height:"600"})]})})})})]})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(g,{children:Object(O.jsx)(be,{})})}),document.getElementById("root")),he()}],[[26,1,2]]]);
//# sourceMappingURL=main.8ca5857e.chunk.js.map